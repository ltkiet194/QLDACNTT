
@using GameStore.Models

@{
    HttpCookie cookie = Request.Cookies["KhachHang"];
    string hoTen = cookie != null ? cookie.Values["HoTen"] : null;
}



<!-- Thêm thư viện Google Sign-In API -->
<script src="https://accounts.google.com/gsi/client" async defer></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.4/dist/sweetalert2.min.css">
<style>
    .swal2-popup {
        display: grid;
        background-color: white;
        border: none;
        border-radius: 10px;
        padding: 20px;
        max-width: 400px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        font-family: Arial, sans-serif;
    }

    .swal2-close {
        display: none;
    }

    .swal2-icon {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
    }

        .swal2-icon svg {
            width: 80px;
            height: 80px;
        }

    .swal2-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .swal2-html-container {
        font-size: 16px;
        margin-bottom: 20px;
    }

    .swal2-confirm {
        background-color: #3085d6;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
    }

        .swal2-confirm:hover {
            background-color: #2868c7;
        }
</style>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.4/dist/sweetalert2.all.min.js"></script>
<head>
    <meta charset="utf-8">
</head>
<div id="g_id_onload"
     data-client_id="630394691103-h9bopucc6dh3vplm4bk4q4l40an70u89.apps.googleusercontent.com"
     data-callback="handleCredentialResponse" data-login_uri="https://www.example.com/your_login_endpoint"
     hidden>
</div>


<script>

    function login() {
        Swal.fire({
            icon: 'success',
            title: 'Thành công !!!',
            html: 'Bạn đăng nhập thành công!',
            showCloseButton: true,
            showConfirmButton: true,
            confirmButtonText: 'OK',
        });
    }

    function handleCredentialResponse(googleUser) {
        if (googleUser.credential) {
            var idToken = googleUser.credential;
            var payload = idToken.split('.')[1];
            var decodedPayload = decodeURIComponent(escape(atob(payload)));
            var userInfo = JSON.parse(decodedPayload);

            var name = userInfo.name;
            $("#modalLogin").modal("hide");
            $(".modal-backdrop").hide();

           
            var str = userInfo.email + "|" + name;
            $.ajax({
                url: '/Account/CheckLogin',
                type: 'post',
                data: {
                    strs: str
                },
                success: function (data) {
                    if (data.code == 200) {
                        var hoTen = decodeURIComponent(data.dt[1]); // Giải mã tên người dùng từ phản hồi
                        if (hoTen) {
                            $("#name").text(hoTen);

                            // Lưu thông tin người dùng vào cookie
                            var expires = new Date();
                            expires.setDate(expires.getDate() + 1);
                            document.cookie = "KhachHang=HoTen=" + encodeURIComponent(hoTen) + "; expires=" + expires.toUTCString() + "; path=/";
                        }
                        login();

                    }
                    else {
                        alert(data.msg);
                    }
                }
            })
            console.log('User Info:', userInfo);
        }
    }


</script>

<style>
    .nk-social-links-2 > li > * {
        width: 40px;
        height: 38px;
        margin: 3px 5px;
        font-size: 1.1em;
        line-height: 26px;
        background-color: #fff;
        border-radius: 19px;
    }

    .nk-social-links-2 > li > a > svg {
        margin-top: 12px;
        font-size: 19px;
    }

    .g_id_signin {
        /* Tùy chỉnh các thuộc tính phù hợp với thiết kế của bạn */
        width: 26px;
        height: 26px;
        margin: 3px 5px;
        font-size: 1.1em;
        line-height: 26px;
        background-color: #fff;
        border-radius: 13px;
        overflow: hidden;
    }
</style>
<header class="nk-header nk-header-opaque">
    <!-- START: Top Contacts -->
    <div class="nk-contacts-top">
        <div class="container">
            <div class="nk-contacts-left">
                <ul class="nk-social-links">
                    <li><a class="nk-social-rss" href="#"><span class="fa fa-rss"></span></a></li>
                    <li><a class="nk-social-twitch" href="#"><span class="fab fa-twitch"></span></a></li>
                    <li><a class="nk-social-steam" href="#"><span class="fab fa-steam"></span></a></li>
                    <li><a class="nk-social-facebook" href="#"><span class="fab fa-facebook"></span></a></li>
                    <li><a class="nk-social-google-plus" href="#"><span class="fab fa-google-plus"></span></a></li>
                    <li><a class="nk-social-twitter" href="#" target="_blank"><span class="fab fa-twitter"></span></a></li>
                    <li><a class="nk-social-pinterest" href="#"><span class="fab fa-pinterest-p"></span></a></li>

                    <!-- Additional Social Buttons
                        <li><a class="nk-social-behance" href="#"><span class="fab fa-behance"></span></a></li>
                        <li><a class="nk-social-bitbucket" href="#"><span class="fab fa-bitbucket"></span></a></li>
                        <li><a class="nk-social-dropbox" href="#"><span class="fab fa-dropbox"></span></a></li>
                        <li><a class="nk-social-dribbble" href="#"><span class="fab fa-dribbble"></span></a></li>
                        <li><a class="nk-social-deviantart" href="#"><span class="fab fa-deviantart"></span></a></li>
                        <li><a class="nk-social-flickr" href="#"><span class="fab fa-flickr"></span></a></li>
                        <li><a class="nk-social-foursquare" href="#"><span class="fab fa-foursquare"></span></a></li>
                        <li><a class="nk-social-github" href="#"><span class="fab fa-github"></span></a></li>
                        <li><a class="nk-social-instagram" href="#"><span class="fab fa-instagram"></span></a></li>
                        <li><a class="nk-social-linkedin" href="#"><span class="fab fa-linkedin"></span></a></li>
                        <li><a class="nk-social-medium" href="#"><span class="fab fa-medium"></span></a></li>
                        <li><a class="nk-social-odnoklassniki" href="#"><span class="fab fa-odnoklassniki"></span></a></li>
                        <li><a class="nk-social-paypal" href="#"><span class="fab fa-paypal"></span></a></li>
                        <li><a class="nk-social-reddit" href="#"><span class="fab fa-reddit"></span></a></li>
                        <li><a class="nk-social-skype" href="#"><span class="fab fa-skype"></span></a></li>
                        <li><a class="nk-social-soundcloud" href="#"><span class="fab fa-soundcloud"></span></a></li>
                        <li><a class="nk-social-slack" href="#"><span class="fab fa-slack"></span></a></li>
                        <li><a class="nk-social-tumblr" href="#"><span class="fab fa-tumblr"></span></a></li>
                        <li><a class="nk-social-vimeo" href="#"><span class="fab fa-vimeo"></span></a></li>
                        <li><a class="nk-social-vk" href="#"><span class="fab fa-vk"></span></a></li>
                        <li><a class="nk-social-wordpress" href="#"><span class="fab fa-wordpress"></span></a></li>
                        <li><a class="nk-social-youtube" href="#"><span class="fab fa-youtube"></span></a></li>
                    -->
                </ul>
            </div>
            <div class="nk-contacts-right">
                <ul class="nk-contacts-icons">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#modalSearch">
                            <span class="fa fa-search"></span>
                        </a>
                    </li>
                    <li>
                        @if (!string.IsNullOrEmpty(hoTen))
                        {
                            <p id="name">@HttpUtility.UrlDecode(hoTen)</p>
                        }
                        else
                        {
                            <p id="name"></p>
                        }

                        <a href="#" data-toggle="modal" data-target="#modalLogin">
                            <span class="fa fa-user"></span>
                        </a>
                    </li>
                    <li>
                        <span class="nk-cart-toggle">
                            <span class="fa fa-shopping-cart"></span>
                            <span class="nk-badge">27</span>
                        </span>
                        <div class="nk-cart-dropdown">
                            <div class="nk-widget-post">
                                <a href="store-product.html" class="nk-post-image">
                                    <img src="~/Theme/images/product-5-xs.jpg" alt="In all revolutions of">
                                </a>
                                <h3 class="nk-post-title">
                                    <a href="#" class="nk-cart-remove-item"><span class="ion-android-close"></span></a>
                                    <a href="store-product.html">In all revolutions of</a>
                                </h3>
                                <div class="nk-gap-1"></div>
                                <div class="nk-product-price">€ 23.00</div>
                            </div>

                            <div class="nk-widget-post">
                                <a href="store-product.html" class="nk-post-image">
                                    <img src="~/Theme/images/product-7-xs.jpg" alt="With what mingled joy">
                                </a>
                                <h3 class="nk-post-title">
                                    <a href="#" class="nk-cart-remove-item"><span class="ion-android-close"></span></a>
                                    <a href="store-product.html">With what mingled joy</a>
                                </h3>
                                <div class="nk-gap-1"></div>
                                <div class="nk-product-price">€ 14.00</div>
                            </div>

                            <div class="nk-gap-2"></div>
                            <div class="text-center">
                                <a href="store-checkout.html" class="nk-btn nk-btn-rounded nk-btn-color-main-1 nk-btn-hover-color-white">Proceed to Checkout</a>
                            </div>
                        </div>
                    </li>

                </ul>
            </div>
        </div>
    </div>
    <!-- END: Top Contacts -->
    <!--
        START: Navbar

        Additional Classes:
            .nk-navbar-sticky
            .nk-navbar-transparent
            .nk-navbar-autohide
    -->
    <nav class="nk-navbar nk-navbar-top nk-navbar-sticky nk-navbar-autohide">
        <div class="container">
            <div class="nk-nav-table">

                <a href="@Url.Action("TrangChu","TrangChu")" class="nk-nav-logo">
                    <img src="~/Theme/images/logo.png" alt="GoodGames" width="199">
                </a>

                <ul class="nk-nav nk-nav-right d-none d-lg-table-cell" data-nav-mobile="#nk-nav-mobile">

                    <li class=" nk-drop-item">
                        <a href="elements.html">
                            Features
                        </a><ul class="dropdown">
                            <li class=" nk-drop-item">
                                <a href="@Url.Action("Forum","Forum")">
                                    Forum
                                </a><ul class="dropdown">

                                    <li>
                                        <a href="@Url.Action("Forum","Forum")">
                                            Forum
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("ForumTopics","ForumTopics")">
                                            Topics
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("ForumFingleTopics","ForumFingleTopics")ForumFingleTopic">
                                            Single Topic
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">
                                    Coming Soon
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Offline
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    404

                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class=" nk-drop-item">
                        <a href="@Url.Action("BlogList","BlogList")">
                            Blog
                        </a><ul class="dropdown">
                            <li>
                                <a href="@Url.Action("News","News")">
                                    News
                                </a>
                            </li>
                            <li class=" nk-drop-item">
                                <a href="#">
                                    Blog With Sidebar
                                </a><ul class="dropdown">
                                    <li>
                                        <a href="#">
                                            Blog Grid
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            Blog List
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">
                                    Blog Fullwidth
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Blog Article
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="@Url.Action("Gallery","Gallery")">
                            Gallery
                        </a>
                    </li>
                    <li class=" nk-drop-item">
                        <a href="tournaments.html">
                            Tournaments
                        </a><ul class="dropdown">
                            <li>
                                <a href="#">
                                    Tournament
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Teams

                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Teammate

                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class=" nk-drop-item">
                        <a href="@Url.Action("Store","Store")">
                            Store

                        </a><ul class="dropdown">

                            <li>
                                <a href="@Url.Action("Store","Store")">
                                    Store
                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("StoreProduct","StoreProduct")">
                                    Product
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Catalog
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Catalog Alt

                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("StoreCheckout","StoreCheckout")">
                                    Checkout

                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("StoreCart","StoreCart")">
                                    Cart
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="nk-nav nk-nav-right nk-nav-icons">
                    <li class="single-icon d-lg-none">
                        <a href="#" class="no-link-effect" data-nav-toggle="#nk-nav-mobile">
                            <span class="nk-icon-burger">
                                <span class="nk-t-1"></span>
                                <span class="nk-t-2"></span>
                                <span class="nk-t-3"></span>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- END: Navbar -->

</header>
<!--
    START: Navbar Mobile

    Additional Classes:
        .nk-navbar-left-side
        .nk-navbar-right-side
        .nk-navbar-lg
        .nk-navbar-overlay-content
-->
<div id="nk-nav-mobile" class="nk-navbar nk-navbar-side nk-navbar-right-side nk-navbar-overlay-content d-lg-none">
    <div class="nano">
        <div class="nano-content">
            <a href="@Url.Action("TrangChu","TrangChu")" class="nk-nav-logo">
                <img src="~/Theme/images/logo.png" alt="" width="120">
            </a>
            <div class="nk-navbar-mobile-content">
                <ul class="nk-nav">
                    <!-- Here will be inserted menu from [data-mobile-menu="#nk-nav-mobile"] -->
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- END: Navbar Mobile -->
<!-- START: Login Modal -->
<div class="nk-modal modal fade" id="modalLogin" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span class="ion-android-close"></span>
                </button>

                <h4 class="mb-0"><span class="text-main-1">Sign</span> In</h4>

                <div class="nk-gap-1"></div>
                <form action="" method="post" class="nk-form text-white">
                    <div class="row vertical-gap">
                        <div class="col-md-6">
                            Use email and password:

                            <div class="nk-gap"></div>
                            <input type="email" value="" name="email" class=" form-control" placeholder="Email">

                            <div class="nk-gap"></div>
                            <input type="password" value="" name="password" class="required form-control" placeholder="Password">
                        </div>
                        <div class="col-md-6">
                            Or social account:

                            <div class="nk-gap"></div>

                            <ul class="nk-social-links-2">
                                <li><a class="nk-social-facebook" href="#"><span class="fab fa-facebook"></span></a></li>
                                <li><a class="nk-social-twitter" href="#"><span class="fab fa-twitter"></span></a></li>
                                <li>
                                    <a class="g_id_signin nk-social-google-plus" href="#" data-type="icon"><span class="fab fa-google-plus"></span></a>

                                </li>

                            </ul>
                        </div>
                    </div>

                    <div class="nk-gap-1"></div>
                    <div class="row vertical-gap">
                        <div class="col-md-6">
                            <a href="#" class="nk-btn nk-btn-rounded nk-btn-color-white nk-btn-block">Sign In</a>
                        </div>
                        <div class="col-md-6">
                            <div class="mnt-5">
                                <small><a href="#">Forgot your password?</a></small>
                            </div>
                            <div class="mnt-5">
                                <small><a href="#">Not a member? Sign up</a></small>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- END: Login Modal -->
